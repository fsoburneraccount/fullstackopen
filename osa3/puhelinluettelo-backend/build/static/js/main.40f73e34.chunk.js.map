{"version":3,"sources":["components/Forms.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["FormField","fieldLabel","fieldValue","handleChange","value","onChange","addValueToList","fields","onSubmit","map","field","key","id","label","type","nameFilterValue","nameFilterHandleChange","Persons","persons","removePerson","person","name","number","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","App","useState","setPersons","useEffect","personService","initialPersons","newName","setNewName","newNumber","setNewNumber","event","target","showMsg","msg","setMessage","setTimeout","showError","setErrorMessage","setNameFilterValue","personsToShow","filter","p","toLowerCase","includes","errorMessage","Forms","preventDefault","newPerson","personInd","findIndex","common","returnedPerson","concat","catch","err","error","handleBackendError","confirmationDialogue","window","confirm","newPersonId","toString","handleDeleted","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.40f73e34.chunk.js","sourcesContent":["import React from 'react'\n\nconst FormField = ({fieldLabel, fieldValue, handleChange}) => (\n  <div>\n    {fieldLabel}: <input value={fieldValue} onChange={handleChange} />\n  </div>\n)\n\nconst InsertForm = ({addValueToList, fields}) => (\n  <div>\n    <h2>add a new</h2>\n    <form onSubmit={addValueToList}>\n      {fields.map((field)=><FormField key={field.id}\n                                      fieldLabel={field.label}\n                                      fieldValue={field.value}\n                                      handleChange={field.handleChange} />)}\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  </div>\n)\n\nconst FilterForm = ({nameFilterValue, nameFilterHandleChange}) => (\n  <form>\n    <FormField fieldLabel=\"filter shown with\"\n               fieldValue={nameFilterValue}\n               handleChange={nameFilterHandleChange} />\n  </form>\n)\n\nexport default { InsertForm, FilterForm }\n\n","import React from 'react'\n\nconst Persons = ({persons, removePerson}) => {\n    return (\n    <div>\n      <h2>Numbers</h2>\n      {persons.map(person=>\n        <form onSubmit={removePerson(person)} key={person.id}>\n          {person.name} {person.number}\n          <button type=\"submit\">delete</button>\n        </form>\n      )}\n    </div>\n  )\n}\n\nexport default Persons\n\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl).then(response => response.data)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject).then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\n}\n\nconst del = id => {\n  return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\n}\nexport default { getAll, create, update, del }\n\n","import React, { useState, useEffect } from 'react'\nimport Forms from './components/Forms'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\n\nconst Notification = ({ message, className }) => {\n  if (message === null) { return null }\n\n  return ( <div className={className}> {message} </div> )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n    useEffect(() => {\n      personService\n        .getAll()\n        .then(initialPersons => {\n          setPersons(initialPersons)\n        })\n    }, [])\n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const fields = [\n    { id: 0, label: \"name\", value: newName,\n      handleChange: (event) => {\n        setNewName(event.target.value)\n      }\n    },\n    { id: 1, label: \"number\", value: newNumber,\n      handleChange: (event) => {\n        setNewNumber(event.target.value)\n      }\n    }\n  ]\n\n  const showMsg = (msg, person) => {\n    setMessage(`${msg} ${person.name}`)\n    setTimeout(() => { setMessage(null) }, 5000)\n  }\n\n  const showError = msg => {\n    setErrorMessage(msg)\n    setTimeout(() => { setErrorMessage(null) }, 5000)\n  }\n\n  const handleDeleted = person => {\n    showError(`Information of ${person.name} does not exist on the server`)\n    setPersons(persons.filter(p => p.name !== person.name))\n  }\n\n  const handleBackendError = (err) => showError(err.error)\n\n  const updateError = err => showError(err.toString())\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const newPerson = { name: newName, number: newNumber }\n    const personInd = persons.findIndex(p => p.name === newPerson.name)\n    const common = (msg, person) => {\n      setNewName('')\n      setNewNumber('')\n      showMsg(msg, person)\n    }\n    if (personInd<0) {\n      personService\n        .create(newPerson)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          common(\"Added\", returnedPerson)\n        })\n        .catch(err => handleBackendError(err.response.data))\n    } else {\n      const confirmationDialogue = `${newPerson.name} is already added to phonebook, ` +\n        `replace the old number with a new one?`\n      if (window.confirm(confirmationDialogue)) {\n        const newPersonId = persons[personInd].id\n        personService\n          .update(newPersonId, newPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(p => p.id === newPersonId ? returnedPerson : p))\n            common(\"Updated\", returnedPerson)\n          })\n          .catch(error => updateError(error))\n      }\n    }\n  }\n\n  const removePerson = person => event => {\n    event.preventDefault()\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService\n        .del(person.id)\n        .then(data => {\n          setPersons(persons.filter(p => p.id !== person.id))\n          showMsg(\"Deleted\", person)\n        })\n        .catch(err => handleDeleted(err))\n    }\n  }\n\n  const [ nameFilterValue, setNameFilterValue ] = useState('')\n  const nameFilterHandleChange = event => setNameFilterValue(event.target.value)\n  const nameFilter = name => name.toLowerCase().includes(nameFilterValue.toLowerCase())\n  const personsToShow = persons.filter(p => nameFilter(p.name))\n\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ message, setMessage ] = useState(null)\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} className=\"message\" />\n      <Notification message={errorMessage} className=\"error\" />\n      <Forms.FilterForm nameFilterValue={nameFilterValue}\n                  nameFilterHandleChange={nameFilterHandleChange} />\n      <Forms.InsertForm addValueToList={addPerson} fields={fields}/>\n      <Persons persons={personsToShow} removePerson={removePerson} />\n    </div>\n  )\n}\n\nexport default App\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}